<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Simulator 1</title>

    <style>
        a {
            text-decoration: none;
        }

        .options-container {
            display: none;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .experiment-image {
            display: none;
            width: 100%;
            height: auto;
            margin-top: 20px;
        }

        .graph-images {
            display: none;
            margin-top: 20px;
        }

        .polishing {
            display: flex;
            flex-direction: column;
            align-content: center;
            /* justify-content: center; */
            align-items: center;
        }

        /* Added style for random images container */
        #final-images {
            display: none;
        }

        .finalimages {
            cursor: pointer;
            width: 100%;
            height: auto;
        }
    </style>

</head>

<body>
    <button type="button" class="btn btn-outline-info mx-2 my-2"><a href="index.html"> Go to the main page</a></button>
    <button type="button" class="btn btn-outline-info m-3"><a href="index.html">Back </a></button>
    <button type="button" class="btn btn-outline-info m-3"><a href="Simulator2.html">Next </a></button>
    <h2 class="d-flex justify-content-center align-items-center">Tailoring and learning the microstructures via heat
        treatment for steels</h2>

    <div class="container">
        <div class="row">

            <!-- Sample  -->
            <div class="col-md-2">
                <button type="button" class="btn btn-outline-info m-2" onclick="showOptions()">Sample</button>
            </div>

            <!-- Action with sample  -->
            <div class="col-md-2">
                <div class="options-container" id="options-container">
                    <label>What type of heat treatment you want to perform with the sample ?</label>
                    <button class="btn btn-outline-info m-2" onclick="processSample('Annealing')">Annealing</button>
                    <button class="btn btn-outline-info m-2" onclick="processSample('Normalizing')">Normalizing</button>
                    <button class="btn btn-outline-info m-2" onclick="processSample('Quenching')">Quenching</button>
                </div>
            </div>

            <!-- Graph image of sample -->
            <div class="col-md-4 polishing">
                <img src="./images/Experiment 9-Simulator 1.gif" alt=" FurnaceAnealingGraph" class="experiment-image"
                    id="annealing-image" />
                <img src="./images/Experiment 9-Simulator 1-2.gif" alt=" FurnaceNormalizingGraph"
                    class="experiment-image" id="normalizing-image" />
                <img src="./images/Experiment 9-Simulator 1-3.gif" alt=" FurnaceQuenchingGraph" class="experiment-image"
                    id="quenching-image" />

                <!-- Polish Etch  -->
                <button type="button" class="btn btn-outline-info m-2" id="polish-etch-button" style="display: none;"
                    onclick="polishEtch()">Polish Etch</button>

            </div>
            <!-- Random Images Container -->
            <div class="col-md-4">
                <div id="final-images" class="mt-3">
                    <div class="row">
                        <div class="col-md-6">
                            <p> Please select the correct image for the action you have performed </p>
                            <div class="row">
                                <!-- Display three images here -->
                                <div class="col-md-12">
                                    <img src="" alt="Random Image 1" id="random-image-1"
                                        onclick="handleImageSelection('random-image-1')" class="finalimages">
                                </div>
                                <div class="col-md-12">
                                    <img src="" alt="Random Image 2" id="random-image-2"
                                        onclick="handleImageSelection('random-image-2')" class="finalimages">
                                </div>
                                <div class="col-md-12">
                                    <img src="" alt="Random Image 3" id="random-image-3"
                                        onclick="handleImageSelection('random-image-3')" class="finalimages">
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!--  Show Details button  -->
                            <button type="button" class="btn btn-outline-info m-2" id="show-details-button"
                                style="display: none;" onclick="showDetails()">Show Details</button>

                            <span id="image-details-modal" style="display: none;">
                                <!-- Details about the selected option -->
                                <span id="image-details-content">Details will be displayed here.</span>
                            </span>
                        </div>
                    </div>


                </div>
            </div>
        </div>




    </div>
    </div>











    <!-- Modal for sample processing message -->
    <div class="modal fade" id="processing-modal" tabindex="-1" role="dialog" aria-labelledby="processing-modal-label"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="./images/FurnceMachine.gif" alt="sample processing in machine" /> <br />
                    Your sample is processing in the machine...
                </div>
            </div>
        </div>
    </div>

    <!-- Modal after clicking on Polish Etch -->
    <!-- <div class="modal fade" id="etch-processing-modal" tabindex="-1" role="dialog"
        aria-labelledby="etch-processing-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="./images/PolishEtch.png" alt="image processing in machine" /> <br />
                    Your sample is being polish etched ...
                </div>
            </div>
        </div>
    </div> -->

    <!-- Modal for displaying Correct message -->
    <div class="modal fade" id="correct-modal" tabindex="-1" role="dialog" aria-labelledby="correct-modal-label"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <p>Your choice is correct!</p>
                    <!-- <button type="button" class="btn btn-outline-info" onclick="showDetails()">Show Details</button> -->
                    <!-- <p id="image-details-content">Details will be displayed here.</p> -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for displaying Incorrect message -->
    <div class="modal fade" id="incorrect-modal" tabindex="-1" role="dialog" aria-labelledby="incorrect-modal-label"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <p>Your choice is incorrect.</p>
                </div>
            </div>
        </div>
    </div>



    <script>
        var selectedOption = '';

        function showOptions() {
            document.getElementById("options-container").style.display = "flex";
        }

        function processSample(option) {
            // Reset the previously selected option and hide the previous image and "Polish Etch" button
            if (selectedOption) {
                var previousImageId = selectedOption.toLowerCase() + "-image";
                document.getElementById(previousImageId).style.display = "none";
                document.getElementById("polish-etch-button").style.display = "none";
            }

            selectedOption = option;
            // Show processing modal
            $('#processing-modal').modal('show');

            // Simulate processing delay (3 seconds)
            setTimeout(function () {
                // Hide modal after processing
                $('#processing-modal').modal('hide');

                // Show the relevant image and "Polish Etch" button
                var imageId = option.toLowerCase() + "-image";
                document.getElementById(imageId).style.display = "block";
                document.getElementById("polish-etch-button").style.display = "block";

            }, 3000); // 3 seconds delay
        }


        function polishEtch() {
            // Show processing modal for graph images
            // $('#etch-processing-modal').modal('show');

            // Simulate preparing images delay (3 seconds)
            setTimeout(function () {
                // Hide modal after processing
                // $('#etch-processing-modal').modal('hide');

                // Assign specific images for Annealing, Normalizing, and Quenching
                var randomImage1 = './images/AnnealingGraph.png'; // Annealing image
                var randomImage2 = './images/NormalizingGraph.png'; // Normalizing image
                var randomImage3 = './images/QuenchingGraph.png'; // Quenching image

                document.getElementById("random-image-1").src = randomImage1;
                document.getElementById("random-image-2").src = randomImage2;
                document.getElementById("random-image-3").src = randomImage3;

                // hide the "Show Details" button
                document.getElementById("show-details-button").style.display = "none";

                // Show the random images container
                document.getElementById("final-images").style.display = "block";
            }, 1000); // 1 seconds delay
        }

        function handleImageSelection(imageId) {
            // Record the selected image
            selectedImage = document.getElementById(imageId).id;
            console.log("selected image =", document.getElementById(imageId).id);
            console.log("selected option =", selectedOption);

            // Check if the selected image matches the correct image for the chosen option
            if (
                (selectedOption === 'Annealing' && selectedImage === 'random-image-1') ||
                (selectedOption === 'Normalizing' && selectedImage === 'random-image-2') ||
                (selectedOption === 'Quenching' && selectedImage === 'random-image-3')
            ) {
                showCorrectModal();
                document.getElementById("show-details-button").style.display = "block"; // Make the "Show Details" button visible
            } else {
                // Show the incorrect modal if the selected image is incorrect
                $('#incorrect-modal').modal('show');
            }
        }

        function showCorrectModal() {
            // Show the correct modal
            $('#correct-modal').modal('show');
        }

        function showDetails() {
            // Close the correct modal if it's open
            $('#correct-modal').modal('hide');

            // Display specific details for Annealing, Normalizing, or Quenching based on the selected action
            var detailsModal = document.getElementById("image-details-modal");
            var modalContent = document.getElementById("image-details-content");

            if (selectedOption === 'Annealing') {
                modalContent.innerHTML = "Annealing gives coarse pearlite due to sufficient diffusion.   Applications: Metal fabricators, bars, billets, tubes";
            } else if (selectedOption === 'Normalizing') {
                modalContent.innerHTML = "Normalizing gives fine pearlite due to sufficient diffusion.   Applications :Piano wires, increase machinability of metal parts in automotive industries ";
            } else if (selectedOption === 'Quenching') {
                modalContent.innerHTML = "Quenching gives martensite  via diffusion-less transformation. Applications:Truck moving liners, earthmoving buckets, cutting tools, storage tanks ";
            }

            // Show the modal
            detailsModal.style.display = "block";
        }
    </script>
</body>

</html>